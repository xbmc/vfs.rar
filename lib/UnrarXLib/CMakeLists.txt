set(SOURCES archive.cpp
            arcread.cpp
            cmddata.cpp
            consio.cpp
            crc.cpp
            crypt.cpp
            encname.cpp
            errhnd.cpp
            extinfo.cpp
            extract.cpp
            filcreat.cpp
            file.cpp
            filefn.cpp
            filestr.cpp
            find.cpp
            getbits.cpp
            global.cpp
            int64.cpp
            isnt.cpp
            log.cpp
            match.cpp
            options.cpp
            pathfn.cpp
            rar.cpp
            rarvm.cpp
            rawread.cpp
            rdwrfn.cpp
            recvol.cpp
            resource.cpp
            rijndael.cpp
            rs.cpp
            savepos.cpp
            scantree.cpp
            sha1.cpp
            strfn.cpp
            strlist.cpp
            system.cpp
            timefn.cpp
            ulinks.cpp
            unicode.cpp
            unpack.cpp
            volume.cpp)

add_library(unrarxlib STATIC ${SOURCES})
set_property(TARGET unrarxlib PROPERTY POSITION_INDEPENDENT_CODE ON)
if(NOT CORE_SYSTEM_NAME MATCHES windows)
  target_compile_definitions(unrarxlib PRIVATE -DSILENT)
else()
  target_compile_definitions(unrarxlib PRIVATE -D_XBMC -Dstrcasecmp=_stricmp -D_CRT_NONSTDC_NO_DEPRECATE)
  target_compile_options(unrarxlib PRIVATE /wd4146)
endif()
